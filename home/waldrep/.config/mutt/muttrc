# Connection
set ssl_force_tls = yes
set ssl_starttls = yes
set ssl_use_sslv2 = no
set ssl_use_sslv3 = no
set ssl_use_tlsv1 = no
set ssl_use_tlsv1_1 = no
set ssl_use_tlsv1_2 = no
set ssl_use_tlsv1_3 = yes
set ssl_verify_dates = yes
set ssl_verify_host = yes
set mail_check = 10
unset ssl_usesystemcerts
set certificate_file = "$XDG_CONFIG_HOME/mutt/certs/GTS_Root_R1.pem"
set timeout = 10

# IMAP settings
set imap_user = "waldrep@vt.edu"
set imap_pass = `pass show waldrep@vt.edu/mutt`
set header_cache = "~/.cache/mutt/headers"
set message_cachedir= "~/.cache/mutt/messages"

# SMTP settings
set smtp_url = smtps://$imap_user:$imap_pass@smtp.gmail.com

# Remote Gmail folders
set folder = "imaps://imap.gmail.com/"
set spoolfile = "+INBOX"
set postponed = "+[Gmail]/Drafts"
set record = "+[Gmail]/Sent Mail"
set trash = "+[Gmail]/Trash"

# gmail-isms
set copy = no
bind editor <space> noop # allows spaces in mailbox names
macro index,pager y "<save-message>=[Gmail]/All Mail<enter><enter>" "Archive"
macro index,pager d "<save-message>=[Gmail]/Trash<enter><enter>" "Trash"
macro index gi "<change-folder>=INBOX<enter>" "Go to inbox"
macro index ga "<change-folder>=[Gmail]/All Mail<enter>" "Go to all mail"
macro index gs "<change-folder>=[Gmail]/Starred<enter>" "Go to starred messages"
macro index gd "<change-folder>=[Gmail]/Drafts<enter>" "Go to drafts"

# vim keybinding
bind pager j next-line
bind pager k previous-line
bind attach,index,pager \CD next-page
bind attach,index,pager \CU previous-page
bind pager g top
bind pager G bottom
bind attach,index g first-entry
bind attach,index G last-entry

# index display
set sort = 'reverse-threads'
set sort_aux = 'last-date-received'
set date_format = "%F %T%z"
set index_format = "[%Z] %D %-20.20F %s"

# account
set realname = "Jonathan Waldrep"
set from = "waldrep@vt.edu"

# Preferences
source ~/.config/mutt/gpg.rc
source ~/.config/mutt/colors.a172
set crypt_autosign = yes
set crypt_replyencrypt = yes

# Editor
set editor = 'vim -c "set spell spelllang=en_us"'
set signature = "~/.config/mutt/signature"
set smart_wrap = yes

# Deal with HTML parts
set mailcap_path = ~/.config/mutt/mailcap
auto_view text/html
alternative_order text/plain text/html

# Contacts
#set query_command = "goobook query %s"
#macro index,pager a "<pipe-message>goobook add<return>" "add sender to Google contacts"
#bind editor <Tab> complete-query

# vim:ft=muttrc
