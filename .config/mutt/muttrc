# Incoming
set folder = imaps://imap.gmail.com
set imap_user = waldrep@vt.edu
set imap_pass = `pass show isd/gapps/mutt | head -n 1`
mailboxes imap_check_subscribed

# Outgoing
unset record
set realname = 'Jonathan Waldrep'
set from = waldrep@vt.edu
set use_from = yes
set smtp_url=smtps://$imap_user:$imap_pass@smtp.gmail.com
set ssl_force_tls = yes
set ssl_starttls = yes

# Connection
unset imap_passive
set imap_keepalive = 300
set mail_check = 30

# Folders
set header_cache = ~/.cache/mutt/headers
set message_cachedir = ~/.cache/mutt/bodies
set certificate_file = ~/.cache/mutt/certificates
set spoolfile = +INBOX
set postponed = +[Gmail]/Drafts

# Preferences
bind editor <space> noop # allows spaces in mailbox names
macro index,pager y "<save-message>=[Gmail]/All Mail<enter><enter>" "Archive"
set sort = 'reverse-threads'
set sort_aux = 'last-date-received'
set editor = 'vim -c "set spell spelllang=en_us"'
bind index G imap-fetch-mail
set signature = "~/.config/mutt/signature"
source ~/.config/mutt/gpg.rc
set crypt_autosign = yes
set crypt_replyencrypt = yes
source ~/.config/mutt/colors.jp
set smart_wrap = yes

# Contacts
set query_command = "goobook query %s"
macro index,pager a "<pipe-message>goobook add<return>" "add sender to Google contacts"
bind editor <Tab> complete-query

# Views
auto_view text/calendar text/html
alternative_order text/calendar text/plain text/html text/*
